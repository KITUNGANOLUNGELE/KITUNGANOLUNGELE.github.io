import{d as S,r as p,_,l as v,J as b,f as o,n as a,a4 as c,K as h,Q as C,L as V,k as d,an as g,a8 as w}from"./index.f98bd38e.js";import{Q as k,a as $,b as f}from"./QDialog.73c50ee4.js";import{Q as x,C as y}from"./ClosePopup.3df37fcf.js";import{a as F,Q as P}from"./QForm.1f1f6c7e.js";import{a as B}from"./QSelect.12e160d0.js";import{u as Q}from"./option.799c851d.js";import{u as q}from"./promotion.6a7959a1.js";import{u as A}from"./use-quasar.faf7bcac.js";import{d as N}from"./dashComponent.3cc6cf32.js";import{a as O}from"./axios.6e1fcf85.js";import"./use-dark.c38352e8.js";import"./use-timeout.1a21eaf5.js";import"./focus-manager.05708ea9.js";import"./use-key-composition.c298e6f1.js";import"./uid.42677368.js";import"./QItem.9b8d2090.js";const R=S({name:"promForm",beforeCreate(){},setup(){const e=Q(),t=q();let m=[],n=A();const s=p(""),l=p(null);e.Option.forEach(r=>{m.push({label:r.nom_option,value:r.id})});function i(){l.value==null||s.value==""?n.notify({message:"Selectionner une option",icon:"error",iconColor:"red",textColor:"red",color:"white"}):t.savePromotion({nom_prom:s.value,id_option:l.value.value}).then(r=>{r.positive?n.notify({message:r.positive,icon:"check",iconColor:"white",textColor:"white",color:"green"}):n.notify({message:r.negative,icon:"error",iconColor:"white",textColor:"white",color:"red"})}),l.value=null,s.value=""}return{options:m,onSubmit:i,model:l,nom_promotion:s}}}),U={class:"flex flex-center"};function j(e,t,m,n,s,l){return v(),b("div",null,[o(P,{onSubmit:V(e.onSubmit,["prevent"]),onReset:e.onReset,class:"q-gutter-md"},{default:a(()=>[o(F,{modelValue:e.nom_promotion,"onUpdate:modelValue":t[0]||(t[0]=i=>e.nom_promotion=i),type:"text",label:"Nom de la promotion"},{prepend:a(()=>[o(c,{name:"book",color:"blue-4"})]),_:1},8,["modelValue"]),o(B,{modelValue:e.model,"onUpdate:modelValue":t[1]||(t[1]=i=>e.model=i),options:e.options,label:"Option",behavior:"menu",filled:""},{prepend:a(()=>[o(c,{name:"school",color:"blue-4"})]),_:1},8,["modelValue","options"]),h("div",U,[o(C,{label:"Submit",type:"submit",color:"primary",icon:"check"})])]),_:1},8,["onSubmit","onReset"])])}var D=_(R,[["render",j]]);const I={components:{promForm:D,dashComponent:N},beforeCreate(){const e=Q();O.get("http://localhost/chris/option/all/").then(t=>{e.setState(t.data.response)})},updated(){},setup(){return{section:p(!1)}}},E={class:"flex flex-center"},J=h("span",{class:"q-ml-sm"},"ajouter une Promotion",-1);function K(e,t,m,n,s,l){const i=d("dashComponent"),r=d("promForm");return v(),b("div",E,[o(i,{name:"Ajouter une promotion",icon:"book",onClick:t[0]||(t[0]=u=>n.section=!n.section)}),o(k,{modelValue:n.section,"onUpdate:modelValue":t[1]||(t[1]=u=>n.section=u),persistent:""},{default:a(()=>[o($,null,{default:a(()=>[o(f,{class:"row items-center"},{default:a(()=>[o(g,{icon:"book",color:"primary","text-color":"white"}),J]),_:1}),o(f,null,{default:a(()=>[o(r)]),_:1}),o(x,{align:"center"},{default:a(()=>[w(o(C,{flat:"",label:"Fermer",color:"primary"},null,512),[[y]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var io=_(I,[["render",K]]);export{io as default};
