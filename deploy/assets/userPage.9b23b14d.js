import{r as d,c as C,g as ue,U as fe,Y as se,a7 as ve,h as z,p as ge,S as be,a3 as Ve,d as le,_ as R,l as B,J as M,f as n,n as p,a4 as I,K as $,Q as N,L as te,k as T,an as X,a8 as J}from"./index.f98bd38e.js";import{Q as G,a as H,b as E}from"./QDialog.73c50ee4.js";import{Q as Z,C as ee}from"./ClosePopup.3df37fcf.js";import{u as ye,a as y,Q as ne}from"./QForm.1f1f6c7e.js";import{Q as he,a as Ce}from"./QSelect.12e160d0.js";import{u as Fe,a as Se,b as we,d as xe,c as Ue,e as ke,f as re}from"./use-key-composition.c298e6f1.js";import{h as Pe}from"./QItem.9b8d2090.js";import{u as me}from"./promotion.6a7959a1.js";import{u as ze}from"./etudiant.0ae97db3.js";import{u as oe}from"./use-quasar.faf7bcac.js";import{u as Ee,a as Qe}from"./surveillant.69a2ac62.js";import{d as Ne}from"./dashComponent.3cc6cf32.js";import{a as $e}from"./axios.6e1fcf85.js";import"./use-dark.c38352e8.js";import"./use-timeout.1a21eaf5.js";import"./focus-manager.05708ea9.js";import"./uid.42677368.js";function Q(e,l,m,o){const i=[];return e.forEach(r=>{o(r)===!0?i.push(r):l.push({failedPropValidation:m,file:r})}),i}function O(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),se(e)}const qe={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Ae=["rejected"];function De({editable:e,dnd:l,getFileInput:m,addFilesToQueue:o}){const{props:i,emit:r,proxy:t}=ue(),g=d(null),v=C(()=>i.accept!==void 0?i.accept.split(",").map(a=>(a=a.trim(),a==="*"?"*/":(a.endsWith("/*")&&(a=a.slice(0,a.length-1)),a.toUpperCase()))):null),S=C(()=>parseInt(i.maxFiles,10)),V=C(()=>parseInt(i.maxTotalSize,10));function x(a){if(e.value)if(a!==Object(a)&&(a={target:null}),a.target!==null&&a.target.matches('input[type="file"]')===!0)a.clientX===0&&a.clientY===0&&fe(a);else{const w=m();w&&w!==a.target&&w.click(a)}}function P(a){e.value&&a&&o(null,a)}function L(a,w,q,A){let s=Array.from(w||a.target.files);const F=[],k=()=>{F.length!==0&&r("rejected",F)};if(i.accept!==void 0&&v.value.indexOf("*/")===-1&&(s=Q(s,F,"accept",c=>v.value.some(b=>c.type.toUpperCase().startsWith(b)||c.name.toUpperCase().endsWith(b))),s.length===0))return k();if(i.maxFileSize!==void 0){const c=parseInt(i.maxFileSize,10);if(s=Q(s,F,"max-file-size",b=>b.size<=c),s.length===0)return k()}if(i.multiple!==!0&&s.length!==0&&(s=[s[0]]),s.forEach(c=>{c.__key=c.webkitRelativePath+c.lastModified+c.name+c.size}),A===!0){const c=q.map(b=>b.__key);s=Q(s,F,"duplicate",b=>c.includes(b.__key)===!1)}if(s.length===0)return k();if(i.maxTotalSize!==void 0){let c=A===!0?q.reduce((b,Y)=>b+Y.size,0):0;if(s=Q(s,F,"max-total-size",b=>(c+=b.size,c<=V.value)),s.length===0)return k()}if(typeof i.filter=="function"){const c=i.filter(s);s=Q(s,F,"filter",b=>c.includes(b))}if(i.maxFiles!==void 0){let c=A===!0?q.length:0;if(s=Q(s,F,"max-files",()=>(c++,c<=S.value)),s.length===0)return k()}if(k(),s.length!==0)return s}function K(a){O(a),l.value!==!0&&(l.value=!0)}function f(a){se(a),(a.relatedTarget!==null||ve.is.safari!==!0?a.relatedTarget!==g.value:document.elementsFromPoint(a.clientX,a.clientY).includes(g.value)===!1)===!0&&(l.value=!1)}function D(a){O(a);const w=a.dataTransfer.files;w.length!==0&&o(null,w),l.value=!1}function W(a){if(l.value===!0)return z("div",{ref:g,class:`q-${a}__dnd absolute-full`,onDragenter:O,onDragover:O,onDragleave:f,onDrop:D})}return Object.assign(t,{pickFiles:x,addFiles:P}),{pickFiles:x,addFiles:P,onDragover:K,onDragleave:f,processFiles:L,getDndNode:W,maxFilesNumber:S,maxTotalSizeNumber:V}}var je=ge({name:"QFile",inheritAttrs:!1,props:{...Fe,...Se,...qe,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...we,...Ae],setup(e,{slots:l,emit:m,attrs:o}){const{proxy:i}=ue(),r=xe(),t=d(null),g=d(!1),v=Ue(e),{pickFiles:S,onDragover:V,onDragleave:x,processFiles:P,getDndNode:L}=De({editable:r.editable,dnd:g,getFileInput:ae,addFilesToQueue:ie}),K=ye(e),f=C(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),D=C(()=>re(f.value)),W=C(()=>f.value.map(u=>u.name).join(", ")),a=C(()=>Pe(f.value.reduce((u,h)=>u+h.size,0))),w=C(()=>({totalSize:a.value,filesNumber:f.value.length,maxFiles:e.maxFiles})),q=C(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:v.value,...o,id:r.targetUid.value,disabled:r.editable.value!==!0})),A=C(()=>"q-file q-field--auto-height"+(g.value===!0?" q-file--dnd":"")),s=C(()=>e.multiple===!0&&e.append===!0);function F(u){const h=f.value.slice();h.splice(u,1),c(h)}function k(u){const h=f.value.indexOf(u);h>-1&&F(h)}function c(u){m("update:modelValue",e.multiple===!0?u:u[0])}function b(u){u.keyCode===13&&Ve(u)}function Y(u){(u.keyCode===13||u.keyCode===32)&&S(u)}function ae(){return t.value}function ie(u,h){const U=P(u,h,f.value,s.value),_=ae();_!=null&&(_.value=""),U!==void 0&&((e.multiple===!0?e.modelValue&&U.every(pe=>f.value.includes(pe)):e.modelValue===U[0])||c(s.value===!0?f.value.concat(U):U))}function j(){return[z("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function de(){if(l.file!==void 0)return f.value.length===0?j():f.value.map((h,U)=>l.file({index:U,file:h,ref:this}));if(l.selected!==void 0)return f.value.length===0?j():l.selected({files:f.value,ref:this});if(e.useChips===!0)return f.value.length===0?j():f.value.map((h,U)=>z(he,{key:"file-"+U,removable:r.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{F(U)}},()=>z("span",{class:"ellipsis",textContent:h.name})));const u=e.displayValue!==void 0?e.displayValue:W.value;return u.length!==0?[z("div",{class:e.inputClass,style:e.inputStyle,textContent:u})]:j()}function ce(){const u={ref:t,...q.value,...K.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:ie};return e.multiple===!0&&(u.multiple=!0),z("input",u)}return Object.assign(r,{fieldClass:A,emitValue:c,hasValue:D,inputRef:t,innerValue:f,floatingLabel:C(()=>D.value===!0||re(e.displayValue)),computedCounter:C(()=>{if(e.counterLabel!==void 0)return e.counterLabel(w.value);const u=e.maxFiles;return`${f.value.length}${u!==void 0?" / "+u:""} (${a.value})`}),getControlChild:()=>L("file"),getControl:()=>{const u={ref:r.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return r.editable.value===!0&&Object.assign(u,{onDragover:V,onDragleave:x,onKeydown:b,onKeyup:Y}),z("div",u,[ce()].concat(de()))}}),Object.assign(i,{removeAtIndex:F,removeFile:k,getNativeElement:()=>t.value}),be(i,"nativeEl",()=>t.value),ke(r)}});const Ie=le({name:"EtudiantForm",setup(){const e=d([]),l=me(),m=ze(),o=oe(),i=d(""),r=d(""),t=d(""),g=d(""),v=d(""),S=d(null);l.getPromotion.then(x=>{x.forEach(P=>{e.value.push({label:P.nom_promotion,value:P.id})})});function V(){S.value==null||i.value==""||r.value==""||t.value==""||g.value==""||v.value==""?o.notify({message:"Selectionner une option",icon:"error",iconColor:"red",textColor:"red",color:"white"}):m.saveEt({nom:i.value,postnom:r.value,prenom:t.value,mail:g.value,telephone:v.value,id_promotion:S.value.value}).then(x=>{x.positive?o.notify({message:x.positive,icon:"check",iconColor:"white",textColor:"white",color:"green"}):o.notify({message:x.negative,icon:"error",iconColor:"white",textColor:"white",color:"red"})}),S.value=null,i.value="",r.value="",t.value="",r.value="",g.value="",v.value=""}return{options:e,onSubmit:V,nom:i,postnom:r,prenom:t,mail:g,telephone:v,model:S}}}),Te={class:"flex flex-center"};function Oe(e,l,m,o,i,r){return B(),M("div",null,[n(ne,{onSubmit:te(e.onSubmit,["prevent"]),onReset:e.onReset,class:"q-gutter-md"},{default:p(()=>[n(y,{modelValue:e.nom,"onUpdate:modelValue":l[0]||(l[0]=t=>e.nom=t),type:"text",label:"Nom"},{prepend:p(()=>[n(I,{name:"face"})]),_:1},8,["modelValue"]),n(y,{modelValue:e.postnom,"onUpdate:modelValue":l[1]||(l[1]=t=>e.postnom=t),type:"text",label:"Postnom"},null,8,["modelValue"]),n(y,{modelValue:e.prenom,"onUpdate:modelValue":l[2]||(l[2]=t=>e.prenom=t),type:"text",label:"Prenom"},null,8,["modelValue"]),n(y,{modelValue:e.mail,"onUpdate:modelValue":l[3]||(l[3]=t=>e.mail=t),type:"mail",label:"Mail",icon:"mail"},{prepend:p(()=>[n(I,{name:"mail",color:"blue-4"})]),_:1},8,["modelValue"]),n(y,{modelValue:e.telephone,"onUpdate:modelValue":l[4]||(l[4]=t=>e.telephone=t),type:"text",label:"Telephone"},{prepend:p(()=>[n(I,{name:"phone",color:"blue-4"})]),_:1},8,["modelValue"]),n(je,{filled:"",modelValue:e.photo,"onUpdate:modelValue":l[5]||(l[5]=t=>e.photo=t),label:"Image"},{prepend:p(()=>[n(I,{name:"cloud_upload",color:"blue-4"})]),_:1},8,["modelValue"]),n(Ce,{modelValue:e.model,"onUpdate:modelValue":l[6]||(l[6]=t=>e.model=t),options:e.options,label:"Promotion",behavior:"menu",filled:""},null,8,["modelValue","options"]),$("div",Te,[n(N,{label:"Submit",type:"submit",color:"primary",icon:"check"})])]),_:1},8,["onSubmit","onReset"])])}var Re=R(Ie,[["render",Oe]]);const Be=le({name:"EnseignantForm",setup(){const e=oe(),l=d(""),m=d(""),o=d(""),i=d(""),r=d(""),t=Ee();function g(){l.value==""||m.value==""||o.value==""||i.value==""||r.value==""?e.notify({message:"Selectionner une option",icon:"error",iconColor:"red",textColor:"red",color:"white"}):t.saveEnseignant({nom:l.value,postnom:m.value,prenom:o.value,mail:i.value,telephone:r.value}).then(v=>{v.positive?e.notify({message:v.positive,icon:"check",iconColor:"white",textColor:"white",color:"green"}):e.notify({message:v.negative,icon:"error",iconColor:"white",textColor:"white",color:"red"})}),l.value="",m.value="",o.value="",m.value="",i.value="",r.value=""}return{nom:l,postnom:m,prenom:o,mail:i,telephone:r,onSubmit:g}}}),Me={class:"flex flex-center"};function Le(e,l,m,o,i,r){return B(),M("div",null,[n(ne,{onSubmit:te(e.onSubmit,["prevent"]),class:"q-gutter-md"},{default:p(()=>[n(y,{modelValue:e.nom,"onUpdate:modelValue":l[0]||(l[0]=t=>e.nom=t),type:"text",label:"Nom"},null,8,["modelValue"]),n(y,{modelValue:e.postnom,"onUpdate:modelValue":l[1]||(l[1]=t=>e.postnom=t),type:"text",label:"Postnom"},null,8,["modelValue"]),n(y,{modelValue:e.prenom,"onUpdate:modelValue":l[2]||(l[2]=t=>e.prenom=t),type:"text",label:"Prenom"},null,8,["modelValue"]),n(y,{modelValue:e.mail,"onUpdate:modelValue":l[3]||(l[3]=t=>e.mail=t),type:"mail",label:"Mail",icon:"mail"},null,8,["modelValue"]),n(y,{modelValue:e.telephone,"onUpdate:modelValue":l[4]||(l[4]=t=>e.telephone=t),type:"text",label:"Telephone"},null,8,["modelValue"]),$("div",Me,[n(N,{label:"Submit",type:"submit",color:"primary",icon:"check"})])]),_:1},8,["onSubmit"])])}var Ke=R(Be,[["render",Le]]);const We=le({name:"survForm",setup(){const e=oe(),l=d(""),m=d(""),o=d(""),i=d(""),r=d(""),t=Qe();function g(){l.value==""||m.value==""||o.value==""||i.value==""||r.value==""?e.notify({message:"Selectionner une option",icon:"error",iconColor:"red",textColor:"red",color:"white"}):t.saveSurv({nom:l.value,postnom:m.value,prenom:o.value,mail:i.value,telephone:r.value}).then(v=>{v.positive?e.notify({message:v.positive,icon:"check",iconColor:"white",textColor:"white",color:"green"}):e.notify({message:v.negative,icon:"error",iconColor:"white",textColor:"white",color:"red"})}),l.value="",m.value="",o.value="",m.value="",i.value="",r.value=""}return{nom:l,postnom:m,prenom:o,mail:i,telephone:r,onSubmit:g}}}),Ye={class:"flex flex-center"};function _e(e,l,m,o,i,r){return B(),M("div",null,[n(ne,{onSubmit:te(e.onSubmit,["prevent"]),class:"q-gutter-md"},{default:p(()=>[n(y,{modelValue:e.nom,"onUpdate:modelValue":l[0]||(l[0]=t=>e.nom=t),type:"text",label:"Nom"},null,8,["modelValue"]),n(y,{modelValue:e.postnom,"onUpdate:modelValue":l[1]||(l[1]=t=>e.postnom=t),type:"text",label:"Postnom"},null,8,["modelValue"]),n(y,{modelValue:e.prenom,"onUpdate:modelValue":l[2]||(l[2]=t=>e.prenom=t),type:"text",label:"Prenom"},null,8,["modelValue"]),n(y,{modelValue:e.mail,"onUpdate:modelValue":l[3]||(l[3]=t=>e.mail=t),type:"mail",label:"Mail",icon:"mail"},null,8,["modelValue"]),n(y,{modelValue:e.telephone,"onUpdate:modelValue":l[4]||(l[4]=t=>e.telephone=t),type:"text",label:"Telephone"},null,8,["modelValue"]),$("div",Ye,[n(N,{label:"Submit",type:"submit",color:"primary",icon:"check"})])]),_:1},8,["onSubmit"])])}var Xe=R(We,[["render",_e]]);const Je={components:{EtudiantForm:Re,dashComponent:Ne,EnseignantForm:Ke,survForm:Xe},beforeCreate(){const e=me();$e.get("http://localhost/chris/promotion/all/").then(l=>{l.data.message?e.setState([]):e.setState(l.data.response)})},created(){},setup(){const e=d("etudiant"),l=d("man"),m=d(!1),o=d(!1),i=d(!1);return{name:e,icon:l,confirm:m,ens:o,surv:i}}},Ge={class:"flex"},He=$("span",{class:"q-ml-sm"},"Vous allez enregistrer un etudiant",-1),Ze=$("span",{class:"q-ml-sm"},"Vous allez enregistrer un enseignant",-1),el=$("span",{class:"q-ml-sm"},"Vous allez enregistrer un surveillant",-1);function ll(e,l,m,o,i,r){const t=T("dashComponent"),g=T("EtudiantForm"),v=T("EnseignantForm"),S=T("survForm");return B(),M("div",Ge,[n(t,{name:o.name,icon:o.icon,onClick:l[0]||(l[0]=V=>o.confirm=!o.confirm)},null,8,["name","icon"]),n(t,{name:"Enseignant",icon:o.icon,onClick:l[1]||(l[1]=V=>o.ens=!o.ens)},null,8,["icon"]),n(t,{name:"surveillant",icon:o.icon,onClick:l[2]||(l[2]=V=>o.surv=!o.surv)},null,8,["icon"]),n(G,{modelValue:o.confirm,"onUpdate:modelValue":l[3]||(l[3]=V=>o.confirm=V),persistent:""},{default:p(()=>[n(H,null,{default:p(()=>[n(E,{class:"row items-center"},{default:p(()=>[n(X,{icon:o.icon,color:"primary","text-color":"white"},null,8,["icon"]),He]),_:1}),n(E,null,{default:p(()=>[n(g)]),_:1}),n(Z,{align:"center"},{default:p(()=>[J(n(N,{flat:"",label:"Fermer",color:"primary"},null,512),[[ee]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(G,{modelValue:o.ens,"onUpdate:modelValue":l[4]||(l[4]=V=>o.ens=V),persistent:""},{default:p(()=>[n(H,null,{default:p(()=>[n(E,{class:"row items-center"},{default:p(()=>[n(X,{icon:o.icon,color:"primary","text-color":"white"},null,8,["icon"]),Ze]),_:1}),n(E,null,{default:p(()=>[n(v)]),_:1}),n(Z,{align:"center"},{default:p(()=>[J(n(N,{flat:"",label:"Fermer",color:"primary"},null,512),[[ee]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(G,{modelValue:o.surv,"onUpdate:modelValue":l[5]||(l[5]=V=>o.surv=V),persistent:""},{default:p(()=>[n(H,null,{default:p(()=>[n(E,{class:"row items-center"},{default:p(()=>[n(X,{icon:"face",color:"primary","text-color":"white"}),el]),_:1}),n(E,null,{default:p(()=>[n(S)]),_:1}),n(Z,{align:"center"},{default:p(()=>[J(n(N,{flat:"",label:"Fermer",color:"primary"},null,512),[[ee]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var yl=R(Je,[["render",ll]]);export{yl as default};
