import{d as S,r as p,_,l as v,J as b,f as o,n as a,a4 as c,K as h,Q as C,L as g,k as d,an as w,a8 as V}from"./index.3613b871.js";import{Q as k,a as $,b as f}from"./QDialog.910c90bb.js";import{Q as x,C as y}from"./ClosePopup.eb19ace7.js";import{a as F,Q as P}from"./QForm.30c9c5f0.js";import{a as B}from"./QSelect.5d304af8.js";import{u as Q}from"./option.78d84562.js";import{u as q}from"./promotion.4762bc55.js";import{u as A}from"./use-quasar.172adb27.js";import{d as N}from"./dashComponent.fe2e55d7.js";import{a as O}from"./axios.6e1fcf85.js";import"./use-dark.42ce25b7.js";import"./use-timeout.296fb3b4.js";import"./focus-manager.05708ea9.js";import"./use-key-composition.749b5dc8.js";import"./uid.42677368.js";import"./QItem.ea83679a.js";const R=S({name:"promForm",beforeCreate(){},setup(){const e=Q(),t=q();let m=[],n=A();const i=p(""),l=p(null);e.Option.forEach(r=>{m.push({label:r.nom_option,value:r.id})});function s(){l.value==null||i.value==""?n.notify({message:"Selectionner une option",icon:"error",iconColor:"red",textColor:"red",color:"white"}):t.savePromotion({nom_prom:i.value,id_option:l.value.value}).then(r=>{r.positive?n.notify({message:r.positive,icon:"check",iconColor:"white",textColor:"white",color:"green"}):n.notify({message:r.negative,icon:"error",iconColor:"white",textColor:"white",color:"red"})}),l.value=null,i.value=""}return{options:m,onSubmit:s,model:l,nom_promotion:i}}}),U={class:"flex flex-center"};function j(e,t,m,n,i,l){return v(),b("div",null,[o(P,{onSubmit:g(e.onSubmit,["prevent"]),onReset:e.onReset,class:"q-gutter-md"},{default:a(()=>[o(F,{modelValue:e.nom_promotion,"onUpdate:modelValue":t[0]||(t[0]=s=>e.nom_promotion=s),type:"text",label:"Nom de la promotion"},{prepend:a(()=>[o(c,{name:"book",color:"blue-4"})]),_:1},8,["modelValue"]),o(B,{modelValue:e.model,"onUpdate:modelValue":t[1]||(t[1]=s=>e.model=s),options:e.options,label:"Option",behavior:"menu",filled:""},{prepend:a(()=>[o(c,{name:"school",color:"blue-4"})]),_:1},8,["modelValue","options"]),h("div",U,[o(C,{label:"Submit",type:"submit",color:"primary",icon:"check"})])]),_:1},8,["onSubmit","onReset"])])}var D=_(R,[["render",j]]);const I={components:{promForm:D,dashComponent:N},beforeCreate(){const e=Q();O.get("https://gestpresence.000webhostapp.com/chris/option/all/").then(t=>{e.setState(t.data.response)})},updated(){},setup(){return{section:p(!1)}}},E={class:"flex flex-center"},J=h("span",{class:"q-ml-sm"},"ajouter une Promotion",-1);function K(e,t,m,n,i,l){const s=d("dashComponent"),r=d("promForm");return v(),b("div",E,[o(s,{name:"Ajouter une promotion",icon:"book",onClick:t[0]||(t[0]=u=>n.section=!n.section)}),o(k,{modelValue:n.section,"onUpdate:modelValue":t[1]||(t[1]=u=>n.section=u),persistent:""},{default:a(()=>[o($,null,{default:a(()=>[o(f,{class:"row items-center"},{default:a(()=>[o(w,{icon:"book",color:"primary","text-color":"white"}),J]),_:1}),o(f,null,{default:a(()=>[o(r)]),_:1}),o(x,{align:"center"},{default:a(()=>[V(o(C,{flat:"",label:"Fermer",color:"primary"},null,512),[[y]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var so=_(I,[["render",K]]);export{so as default};
